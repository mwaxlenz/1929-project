<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The 1929 Project</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root{--cream:#F5F0E8;--cream-dark:#EDE6D6;--ink:#1A1A1A;--ink-light:#3D3530;--ink-muted:#7A6E62;--gold:#B8960C;--gold-light:#D4AE14;--font-display:"Playfair Display","Libre Baskerville",Georgia,serif;--font-serif:"Libre Baskerville",Georgia,serif;--font-sans:"Source Sans 3","Helvetica Neue",sans-serif;--tr:0.25s cubic-bezier(.4,0,.2,1)}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:var(--cream);color:var(--ink);font-family:var(--font-sans);line-height:1.6}
.ticker-wrap{background:var(--ink);color:var(--gold);font-size:11px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;padding:7px 0;overflow:hidden;position:relative}
.ticker-wrap::before,.ticker-wrap::after{content:"";position:absolute;top:0;bottom:0;width:60px;z-index:2}
.ticker-wrap::before{left:0;background:linear-gradient(to right,var(--ink),transparent)}
.ticker-wrap::after{right:0;background:linear-gradient(to left,var(--ink),transparent)}
.ticker-track{display:flex;white-space:nowrap;width:max-content;animation:ticker 50s linear infinite}
.ticker-track span{padding:0 28px;border-right:1px solid rgba(184,150,12,.3)}
@keyframes ticker{from{transform:translateX(0)}to{transform:translateX(-50%)}}
.masthead{text-align:center;padding:56px 24px 40px;max-width:900px;margin:0 auto}
.masthead-eyebrow{font-size:10px;font-weight:700;letter-spacing:.25em;text-transform:uppercase;color:var(--ink-muted);margin-bottom:20px}
.masthead h1{font-family:var(--font-display);font-size:clamp(42px,8vw,96px);font-weight:900;line-height:.95;letter-spacing:-.02em;text-transform:uppercase;margin-bottom:6px}
.masthead h1 span{display:block;font-size:clamp(14px,2vw,22px);font-weight:400;font-style:italic;letter-spacing:.05em;color:var(--gold);text-transform:none;margin-bottom:4px}
.masthead-sub{font-family:var(--font-serif);font-size:clamp(13px,1.8vw,17px);font-style:italic;color:var(--ink-muted);line-height:1.5;max-width:700px;margin:18px auto 28px}
.masthead-rule{display:flex;align-items:center;gap:16px;margin:28px 0 22px}
.masthead-rule::before,.masthead-rule::after{content:"";flex:1;height:3px;background:var(--ink)}
.date-cap{font-size:9px;font-weight:700;letter-spacing:.2em;text-transform:uppercase;color:var(--ink-muted);padding:3px 12px;border:1px solid var(--ink-muted)}
.masthead-intro{font-family:var(--font-serif);font-size:15px;line-height:1.75;color:var(--ink-light);max-width:660px;margin:0 auto;text-align:left}
.masthead-intro::first-letter{font-size:3.5em;font-family:var(--font-display);font-weight:900;float:left;line-height:.8;margin-right:6px;margin-top:6px;color:var(--gold)}
.filter-bar{position:sticky;top:0;z-index:100;background:var(--ink);padding:14px 24px;box-shadow:0 2px 16px rgba(0,0,0,.25)}
.filter-inner{max-width:1400px;margin:0 auto;display:flex;flex-wrap:wrap;gap:10px;align-items:center}
.filter-search{flex:1;min-width:200px;position:relative}
.filter-search svg{position:absolute;left:12px;top:50%;transform:translateY(-50%);pointer-events:none;opacity:.5}
.filter-search input{width:100%;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);border-radius:2px;color:var(--cream);font-family:var(--font-sans);font-size:13px;padding:8px 12px 8px 36px;outline:none}
.filter-search input::placeholder{color:rgba(245,240,232,.4)}
.filter-search input:focus{border-color:var(--gold)}
.filter-select{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);border-radius:2px;color:var(--cream);font-family:var(--font-sans);font-size:12px;font-weight:600;letter-spacing:.03em;text-transform:uppercase;padding:8px 28px 8px 12px;outline:none;cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23F5F0E8' stroke-width='1.5' fill='none'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center;min-width:160px}
.filter-select:focus{border-color:var(--gold)}
.filter-select option{background:var(--ink)}
.filter-clear{background:none;border:1px solid rgba(184,150,12,.5);border-radius:2px;color:var(--gold);font-family:var(--font-sans);font-size:11px;font-weight:700;letter-spacing:.12em;text-transform:uppercase;padding:8px 14px;cursor:pointer}
.filter-clear:hover{background:var(--gold);color:var(--ink)}
.filter-meta{max-width:1400px;margin:0 auto;padding:8px 24px 0;display:flex;align-items:center;flex-wrap:wrap;gap:8px}
.filter-count{font-size:11px;font-weight:600;letter-spacing:.1em;text-transform:uppercase;color:rgba(245,240,232,.5)}
.pill{display:inline-flex;align-items:center;gap:5px;background:rgba(184,150,12,.15);border:1px solid var(--gold);border-radius:2px;color:var(--gold);font-size:10px;font-weight:700;letter-spacing:.1em;text-transform:uppercase;padding:3px 8px;cursor:pointer}
.pill:hover{background:var(--gold);color:var(--ink)}
.gallery{max-width:1400px;margin:0 auto;padding:40px 24px 80px}
.grid{column-count:1;column-gap:24px}
@media(min-width:640px){.grid{column-count:2}}
@media(min-width:1024px){.grid{column-count:3}}
@media(min-width:1280px){.grid{column-count:4}}
.card-wrap{break-inside:avoid;margin-bottom:24px}
.card{background:#FDFAF4;border:1px solid rgba(26,26,26,.1);box-shadow:0 2px 12px rgba(26,26,26,.1);cursor:pointer;position:relative;opacity:0;transform:translateY(18px);transition:opacity .5s,transform .5s,box-shadow var(--tr)}
.card.show{opacity:1;transform:translateY(0)}
.card:hover{box-shadow:0 8px 32px rgba(26,26,26,.18);transform:translateY(-3px)}
.card.open{box-shadow:0 8px 32px rgba(26,26,26,.18);cursor:default}
.card.open:hover{transform:none}
.card-portrait{position:relative;height:200px;overflow:hidden;background:var(--ink)}
.card-portrait img{width:100%;height:100%;object-fit:cover;object-position:top;filter:sepia(60%) contrast(1.05) brightness(.9);transition:filter var(--tr),transform .4s;display:block}
.card:hover .card-portrait img{filter:sepia(30%) brightness(1);transform:scale(1.03)}
.mono{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#2A2318,#1A1A14,#2A2010)}
.mono-letter{font-family:var(--font-display);font-size:72px;font-weight:900;color:rgba(184,150,12,.3);line-height:1}
.vignette{position:absolute;inset:0;background:radial-gradient(ellipse at center,transparent 40%,rgba(26,26,26,.6) 100%);pointer-events:none}
.cat-pill{position:absolute;top:12px;left:12px;font-size:9px;font-weight:700;letter-spacing:.15em;text-transform:uppercase;color:#fff;padding:3px 8px;border-radius:1px;z-index:2}
.feat-badge{position:absolute;top:12px;right:12px;background:var(--gold);color:var(--ink);font-size:7px;font-weight:900;letter-spacing:.2em;text-transform:uppercase;padding:3px 6px;z-index:2}
.card-body{padding:18px 18px 14px}
.card-name{font-family:var(--font-display);font-size:19px;font-weight:700;line-height:1.15;color:var(--ink);margin-bottom:4px;transition:color var(--tr)}
.card:hover .card-name{color:var(--gold)}
.card.open .card-name{color:var(--ink)}
.card-role{font-size:10px;font-weight:700;letter-spacing:.12em;text-transform:uppercase;color:var(--ink-muted);margin-bottom:10px}
.card-teaser{font-family:var(--font-serif);font-size:12.5px;font-style:italic;line-height:1.55;color:var(--ink-light);margin-bottom:12px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.media-row{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
.mi{font-size:11px;color:var(--ink-muted)}
.mi.on{color:var(--gold)}
.card-cta{display:block;font-size:10px;font-weight:700;letter-spacing:.15em;text-transform:uppercase;color:var(--gold);border-top:1px solid rgba(26,26,26,.08);padding-top:10px;background:none;border-bottom:none;border-left:none;border-right:none;cursor:pointer;text-align:left;width:100%;transition:letter-spacing var(--tr)}
.card:hover .card-cta{letter-spacing:.22em}
.card.open .card-cta{display:none}
.card-exp{display:none;border-top:2px solid var(--gold)}
.card.open .card-exp{display:block}
.exp-inner{padding:24px 22px 28px}
.exp-hdr{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;margin-bottom:20px}
.exp-hdr-left{flex:1;min-width:0}
.exp-name{font-family:var(--font-display);font-size:22px;font-weight:700;line-height:1.15;margin-bottom:4px}
.exp-role{font-size:11px;font-weight:600;letter-spacing:.12em;text-transform:uppercase;color:var(--ink-muted);margin-bottom:6px}
.exp-pages{font-family:var(--font-serif);font-size:11px;font-style:italic;color:var(--ink-muted)}
.exp-pages b{font-style:normal;font-size:9px;font-weight:700;letter-spacing:.1em;text-transform:uppercase;margin-right:4px;font-family:var(--font-sans)}
.close-btn{background:none;border:1px solid rgba(26,26,26,.2);border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--ink-muted);font-size:16px;flex-shrink:0;transition:all var(--tr)}
.close-btn:hover{background:var(--ink);color:var(--cream);border-color:var(--ink)}
.sec{margin-bottom:20px}
.sec-label{font-size:8.5px;font-weight:700;letter-spacing:.22em;text-transform:uppercase;color:var(--ink-muted);border-bottom:1px solid rgba(26,26,26,.12);padding-bottom:5px;margin-bottom:12px}
.bio-short{font-family:var(--font-serif);font-size:13px;line-height:1.7;color:var(--ink-light)}
.bio-ext{font-family:var(--font-serif);font-size:13px;line-height:1.7;color:var(--ink-light);display:none;margin-top:10px}
.bio-ext.open{display:block}
.bio-ext p{margin-bottom:10px}
.bio-ext p:last-child{margin-bottom:0}
.bio-toggle{background:none;border:none;cursor:pointer;font-size:10px;font-weight:700;letter-spacing:.12em;text-transform:uppercase;color:var(--gold);margin-top:8px;padding:0;display:block}
.bio-toggle:hover{color:var(--gold-light)}
.audio-block{background:var(--cream-dark);border:1px solid rgba(26,26,26,.08);padding:14px;margin-bottom:10px}
.audio-hdr{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.audio-title{font-size:9px;font-weight:700;letter-spacing:.18em;text-transform:uppercase;color:var(--ink-muted)}
.audio-dur{font-family:"Courier New",monospace;font-size:10px;color:var(--ink-muted)}
.audio-desc{font-family:var(--font-serif);font-size:11px;font-style:italic;color:var(--ink-muted);margin-bottom:10px;line-height:1.5}
.audio-ui{display:flex;align-items:center;gap:10px}
.play-btn{background:var(--ink);border:none;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--cream);flex-shrink:0;transition:background var(--tr),transform var(--tr)}
.play-btn:hover{background:var(--gold);transform:scale(1.08)}
.progress-wrap{flex:1;height:4px;background:rgba(26,26,26,.15);border-radius:2px;cursor:pointer;position:relative}
.progress-fill{height:100%;background:var(--ink);border-radius:2px;width:0;pointer-events:none}
.progress-dot{position:absolute;top:50%;left:0;transform:translate(-50%,-50%);width:12px;height:12px;background:var(--gold);border-radius:50%;pointer-events:none}
.audio-time{font-family:"Courier New",monospace;font-size:10px;color:var(--ink-muted);white-space:nowrap;flex-shrink:0}
.placeholder-block{background:var(--cream-dark);border:1px dashed rgba(26,26,26,.15);padding:14px;text-align:center;margin-bottom:10px}
.placeholder-block p{font-family:var(--font-serif);font-size:12px;font-style:italic;color:var(--ink-muted)}
.pptx-block{background:var(--cream-dark);border:1px solid rgba(26,26,26,.08);padding:14px;display:flex;gap:14px;align-items:center}
.pptx-thumb{width:80px;height:60px;background:var(--ink);flex-shrink:0;display:flex;align-items:center;justify-content:center;overflow:hidden;font-size:28px;color:rgba(245,240,232,.3)}
.pptx-thumb img{width:100%;height:100%;object-fit:cover}
.pptx-info{flex:1;min-width:0}
.pptx-title-t{font-size:12px;font-weight:600;color:var(--ink);margin-bottom:4px;line-height:1.3}
.pptx-meta{font-size:10px;color:var(--ink-muted);margin-bottom:8px}
.pptx-links{display:flex;gap:10px;flex-wrap:wrap}
.pptx-link{font-size:10px;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:var(--gold);text-decoration:none}
.pptx-link:hover{color:var(--gold-light);text-decoration:underline}
.ext-links{display:flex;flex-direction:column;gap:8px}
.ext-link{display:inline-flex;align-items:center;gap:8px;font-family:var(--font-serif);font-size:13px;color:var(--ink-light);text-decoration:none;border-bottom:1px solid rgba(26,26,26,.15);padding-bottom:8px;transition:color var(--tr),border-color var(--tr)}
.ext-link:last-child{border-bottom:none;padding-bottom:0}
.ext-link:hover{color:var(--gold);border-color:var(--gold)}
.ext-icon{width:16px;height:16px;opacity:.6;flex-shrink:0}
.site-footer{background:var(--ink);color:rgba(245,240,232,.6);padding:48px 24px;text-align:center}
.footer-inner{max-width:700px;margin:0 auto}
.footer-title{font-family:var(--font-display);font-size:24px;font-weight:900;color:var(--cream);letter-spacing:.05em;text-transform:uppercase;margin-bottom:6px}
.footer-tag{font-family:var(--font-serif);font-size:12px;font-style:italic;color:var(--gold);margin-bottom:20px}
.footer-hr{border:none;border-top:1px solid rgba(245,240,232,.1);margin:20px 0}
.footer-body{font-size:12px;line-height:1.8}
.footer-body a{color:var(--gold);text-decoration:none}
.footer-body a:hover{text-decoration:underline}
.footer-date{font-size:10px;letter-spacing:.12em;text-transform:uppercase;margin-top:16px;color:rgba(245,240,232,.3)}
.no-results{text-align:center;padding:60px 20px;font-family:var(--font-serif);font-style:italic;color:var(--ink-muted);font-size:16px;column-span:all}
.loading-msg{text-align:center;padding:60px 20px;font-family:var(--font-serif);font-style:italic;color:var(--ink-muted);font-size:16px}
.video-wrap{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;background:#000;border:1px solid rgba(26,26,26,.1)}
.video-wrap iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:0}
@media(max-width:640px){.masthead{padding:36px 16px 28px}.filter-bar{padding:10px 16px}.filter-select{min-width:120px}}
</style>
</head>
<body>
<div class="ticker-wrap" aria-hidden="true"><div class="ticker-track" id="tickerTrack"></div></div>
<header class="masthead">
  <p class="masthead-eyebrow">An Historical Register &bull; Est. 2026</p>
  <h1><span>The</span>1929 Project</h1>
  <p class="masthead-sub">Architects of the Great Crash &mdash; A Register of the Figures Who Built, Profited From, and Survived the Collapse</p>
  <div class="masthead-rule" aria-hidden="true"><div class="date-cap">October 29, 1929 &mdash; Black Tuesday</div></div>
  <p class="masthead-intro">In the autumn of 1929, the architecture of American finance collapsed in a matter of days. This register documents the bankers, politicians, speculators, and reformers whose decisions &mdash; reckless, brilliant, catastrophic, and consequential &mdash; shaped one of history&rsquo;s defining economic disasters. The names gathered here are not merely historical curiosities; they are the architects of conditions whose consequences echoed across a decade of mass suffering.</p>
</header>
<div class="filter-bar">
  <div class="filter-inner">
    <div class="filter-search">
      <svg width="14" height="14" viewBox="0 0 14 14" fill="none" aria-hidden="true"><circle cx="6" cy="6" r="4.5" stroke="#F5F0E8" stroke-width="1.5"/><path d="M9.5 9.5L12.5 12.5" stroke="#F5F0E8" stroke-width="1.5" stroke-linecap="round"/></svg>
      <input type="text" id="searchInput" placeholder="Search by name, role, institution..." autocomplete="off">
    </div>
    <select class="filter-select" id="catFilter">
      <option value="">All Categories</option>
      <option>Banker</option>
      <option>Politician / Regulator</option>
      <option>Speculator / Trader</option>
      <option>Industrialist / Executive</option>
      <option>Journalist / Intellectual</option>
      <option>Reformer / Investigator</option>
      <option>Other</option>
    </select>
    <select class="filter-select" id="instFilter">
      <option value="">All Institutions</option>
      <option>J.P. Morgan &amp; Co.</option>
      <option>National City Bank</option>
      <option>U.S. Senate / Congress</option>
      <option>Federal Reserve</option>
      <option>White House / Executive Branch</option>
      <option>DuPont / GM</option>
      <option>Independent</option>
      <option>Other</option>
    </select>
    <button class="filter-clear" id="clearBtn">&times; Clear</button>
  </div>
  <div class="filter-meta">
    <span class="filter-count" id="filterCount"></span>
    <div id="pills"></div>
  </div>
</div>
<main class="gallery"><div class="grid" id="grid"><p class="loading-msg">Loading register&hellip;</p></div></main>
<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-title">The 1929 Project</div>
    <div class="footer-tag">Architects of the Great Crash</div>
    <hr class="footer-hr">
    <div class="footer-body">
      <p>Data sourced from the 1929 Project research index. Audio descriptions generated via Google NotebookLM.</p>
      <p style="margin-top:10px">A project of <em>[Organization Name]</em> &bull; <a href="/cdn-cgi/l/email-protection#33505c5d4752504773020a010a43415c595650471d5c4154"><span class="__cf_email__" data-cfemail="e784888993868493a7d6ded5de9795888d828493c9889580">[email&#160;protected]</span></a></p>
    </div>
    <div class="footer-date">Last updated: February 2026</div>
  </div>
</footer>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
"use strict";
var TICKER=["Oct 24, 1929 \u2014 Black Thursday","Oct 28, 1929 \u2014 Dow falls 12.8%","Oct 29, 1929 \u2014 Black Tuesday","Nov 13, 1929 \u2014 Market bottom","Mar 1929 \u2014 Mitchell defies Federal Reserve","Jun 1932 \u2014 Market reaches Depression low","Mar 1933 \u2014 Bank Holiday declared","Jun 1933 \u2014 Glass-Steagall enacted","1934 \u2014 Securities Exchange Act","1935 \u2014 Social Security Act","Apr 1932 \u2014 Pecora hearings begin","1932 \u2014 Unemployment reaches 25%","Nov 1932 \u2014 Roosevelt elected"];
var CAT_COLORS={"Banker":{bg:"#8B6914"},"Politician / Regulator":{bg:"#1C3A5E"},"Speculator / Trader":{bg:"#5C2A2A"},"Industrialist / Executive":{bg:"#2A4A2A"},"Journalist / Intellectual":{bg:"#3D2A5C"},"Reformer / Investigator":{bg:"#1A4A3A"},"Other":{bg:"#4A3A2A"}};
var all=[],filtered=[],expandedId=null,searchTimer=null,q="",cat="",inst="";

function buildTicker(){
  var t=document.getElementById("tickerTrack");
  t.innerHTML=TICKER.concat(TICKER).map(function(s){return"<span>"+s+"</span>";}).join("");
}

function init(people){
  buildTicker();
  all=people.filter(function(p){return p.status==="published";});
  all.sort(function(a,b){
    if(a.featured&&!b.featured)return -1;
    if(!a.featured&&b.featured)return 1;
    return a.sort_name.localeCompare(b.sort_name);
  });
  filtered=all.slice();
  render();
  wireFilters();
}

function wireFilters(){
  document.getElementById("searchInput").addEventListener("input",function(e){
    clearTimeout(searchTimer);
    var v=e.target.value;
    searchTimer=setTimeout(function(){q=v.trim().toLowerCase();applyFilters();},300);
  });
  document.getElementById("catFilter").addEventListener("change",function(e){cat=e.target.value;applyFilters();});
  document.getElementById("instFilter").addEventListener("change",function(e){inst=e.target.value;applyFilters();});
  document.getElementById("clearBtn").addEventListener("click",function(){
    document.getElementById("searchInput").value="";
    document.getElementById("catFilter").value="";
    document.getElementById("instFilter").value="";
    q="";cat="";inst="";applyFilters();
  });
}

function applyFilters(){
  expandedId=null;
  filtered=all.filter(function(p){
    var mq=!q||p.full_name.toLowerCase().indexOf(q)>-1||p.category.toLowerCase().indexOf(q)>-1||p.institution.toLowerCase().indexOf(q)>-1||p.role_title.toLowerCase().indexOf(q)>-1;
    return mq&&(!cat||p.category===cat)&&(!inst||p.institution===inst);
  });
  render();updateMeta();
}

function updateMeta(){
  document.getElementById("filterCount").textContent="Showing "+filtered.length+" of "+all.length+" figures";
  var pillsEl=document.getElementById("pills");
  pillsEl.innerHTML="";
  if(q)pillsEl.appendChild(mkPill('"'+q+'"',function(){document.getElementById("searchInput").value="";q="";applyFilters();}));
  if(cat)pillsEl.appendChild(mkPill(cat,function(){document.getElementById("catFilter").value="";cat="";applyFilters();}));
  if(inst)pillsEl.appendChild(mkPill(inst,function(){document.getElementById("instFilter").value="";inst="";applyFilters();}));
}

function mkPill(label,fn){
  var b=document.createElement("button");b.className="pill";
  b.innerHTML=label+" <span>\u00d7</span>";b.addEventListener("click",fn);return b;
}

function render(){
  var grid=document.getElementById("grid");grid.innerHTML="";
  if(!filtered.length){
    var p=document.createElement("p");p.className="no-results";p.textContent="No figures match your filters.";grid.appendChild(p);updateMeta();return;
  }
  filtered.forEach(function(person){
    var w=document.createElement("div");w.className="card-wrap";w.innerHTML=cardHTML(person);grid.appendChild(w);
  });
  updateMeta();reveal();wireCards();
}

function mono(name){
  var pts=name.replace(/[^a-zA-Z\s]/g,"").trim().split(/\s+/);
  return pts.length>=2?(pts[0][0]+pts[pts.length-1][0]).toUpperCase():pts[0][0].toUpperCase();
}

function esc(s){return String(s||"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;");}

function cardHTML(p){
  var col=(CAT_COLORS[p.category]||CAT_COLORS["Other"]).bg;
  var port=p.portrait_url?'<img src="'+esc(p.portrait_url)+'" alt="'+esc(p.portrait_alt)+'" loading="lazy">'
    :'<div class="mono"><span class="mono-letter">'+mono(p.full_name)+'</span></div>';
  var feat=p.featured?'<div class="feat-badge">Featured</div>':"";
  var hS=!!p.audio_short_url,hE=!!p.audio_extended_url,hP=!!p.pptx_view_url,hW=!!p.wikipedia_url,hY=!!p.youtube_url;
  var med='<div class="media-row">'
    +'<span class="mi'+(hS?' on':'')+'">&#127911; Short</span>'
    +'<span class="mi'+(hE?' on':'')+'">&#127911;&#127911; Ext.</span>'
    +'<span class="mi'+(hP?' on':'')+'">&#128202; Slides</span>'
    +(hW?'<span class="mi on">&#128279; Wiki</span>':"")
    +(hY?'<span class="mi on">&#9654; Video</span>':"")
    +'</div>';
  return'<article class="card" data-id="'+p.id+'">'
    +'<div class="card-portrait">'+port+'<div class="vignette"></div>'
    +'<div class="cat-pill" style="background:'+col+'">'+esc(p.category)+'</div>'+feat+'</div>'
    +'<div class="card-body">'
    +'<h2 class="card-name">'+esc(p.full_name)+'</h2>'
    +'<p class="card-role">'+esc(p.role_title)+'</p>'
    +'<p class="card-teaser">'+esc(p.primary_historical_role)+'</p>'
    +med+'<button class="card-cta">Read Profile &#8594;</button></div>'
    +'<div class="card-exp">'+expHTML(p)+'</div></article>';
}

function expHTML(p){
  var bio=p.bio_short||"<em>Biography coming soon.</em>";
  var hasE=!!p.bio_extended;
  var extP=hasE?p.bio_extended.split("\n\n").filter(function(s){return s.trim();}).map(function(s){return"<p>"+s.trim()+"</p>";}).join(""):"";
  var bioT=hasE?'<div class="bio-ext" id="bext-'+p.id+'">'+extP+'</div><button class="bio-toggle" data-bid="'+p.id+'">Read more &#8595;</button>':"";
  var pgs=p.page_references?'<div class="exp-pages"><b>Index pp.</b>'+esc(p.page_references)+'</div>':"";
  return'<div class="exp-inner">'
    +'<div class="exp-hdr"><div class="exp-hdr-left">'
    +'<h3 class="exp-name">'+esc(p.full_name)+'</h3>'
    +'<div class="exp-role">'+esc(p.role_title)+' &bull; '+esc(p.institution)+'</div>'
    +pgs+'</div>'
    +'<button class="close-btn" data-cid="'+p.id+'">\u00d7</button></div>'
    +'<div class="sec"><div class="sec-label">Biography</div>'
    +'<div class="bio-short">'+bio+'</div>'+bioT+'</div>'
    +audioSec(p)+timelineSec(p)+videoSec(p)+extLinksHTML(p)+'</div>';
}

function audioSec(p){
  if(!p.audio_short_url)return'<div class="sec"><div class="sec-label">Audio Description</div><div class="placeholder-block"><p>Audio description in production &mdash; check back soon.</p></div></div>';
  return'<div class="sec"><div class="sec-label">Audio Description</div>'
    +audioPlayer("short",p.id,p.audio_short_url,p.audio_short_duration,p.audio_short_description,"Short Version")
    +'</div>';
}

function audioPlayer(type,pid,url,dur,desc,label){
  var aid="aud-"+pid+"-"+type;
  return'<div class="audio-block">'
    +'<div class="audio-hdr"><span class="audio-title">'+label+'</span>'+(dur?'<span class="audio-dur">'+esc(dur)+'</span>':"")+'</div>'
    +(desc?'<div class="audio-desc">'+esc(desc)+'</div>':"")
    +'<div class="audio-ui">'
    +'<button class="play-btn" data-aid="'+aid+'" aria-label="Play '+label+'">'
    +'<svg width="12" height="13" viewBox="0 0 12 13" fill="currentColor"><path d="M2 1.5l9 5-9 5v-10z"/></svg></button>'
    +'<div class="progress-wrap" data-pid="'+aid+'">'
    +'<div class="progress-fill" id="pf-'+aid+'"></div>'
    +'<div class="progress-dot" id="pd-'+aid+'"></div></div>'
    +'<span class="audio-time" id="pt-'+aid+'">0:00</span></div>'
    +'<audio id="'+aid+'" src="'+esc(url)+'" preload="none" style="display:none"></audio>'
    +'</div>';
}

function timelineSec(p){
  if(!p.pptx_view_url)return'<div class="sec"><div class="sec-label">Illustrated Timeline</div><div class="placeholder-block"><p>Illustrated timeline in production.</p></div></div>';
  var th=p.pptx_thumbnail_url?'<img src="'+esc(p.pptx_thumbnail_url)+'" alt="">':'&#128202;';
  return'<div class="sec"><div class="sec-label">Illustrated Timeline</div>'
    +'<div class="pptx-block"><div class="pptx-thumb">'+th+'</div>'
    +'<div class="pptx-info"><div class="pptx-title-t">'+(p.pptx_title||"Illustrated Timeline")+'</div>'
    +(p.pptx_slide_count?'<div class="pptx-meta">'+p.pptx_slide_count+' slides</div>':"")
    +'<div class="pptx-links">'
    +'<a href="'+esc(p.pptx_view_url)+'" target="_blank" rel="noopener" class="pptx-link">View &#8599;</a>'
    +(p.pptx_download_url?'<a href="'+esc(p.pptx_download_url)+'" target="_blank" rel="noopener" class="pptx-link">Download &#8595;</a>':"")
    +'</div></div></div></div>';
}

function ytId(url){
  if(!url)return null;
  var m=url.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|shorts\/))([a-zA-Z0-9_-]{11})/);
  return m?m[1]:null;
}

function videoSec(p){
  if(!p.youtube_url)return'<div class="sec"><div class="sec-label">Animated Presentation</div><div class="placeholder-block"><p>Animated presentation in production.</p></div></div>';
  var yid=ytId(p.youtube_url);
  if(yid){
    return'<div class="sec"><div class="sec-label">Animated Presentation</div>'
      +'<div class="video-wrap">'
      +'<iframe src="https://www.youtube.com/embed/'+yid+'" title="Animated Presentation" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'
      +'</div></div>';
  }
  // Fallback: linked button for non-YouTube URLs
  return'<div class="sec"><div class="sec-label">Animated Presentation</div>'
    +'<div class="placeholder-block"><a href="'+esc(p.youtube_url)+'" target="_blank" rel="noopener" class="pptx-link" style="font-size:13px">Watch Presentation &#8599;</a></div></div>';
}

function extLinksHTML(p){
  if(!p.wikipedia_url&&!p.youtube_url)return"";
  var yid=ytId(p.youtube_url);
  var h='<div class="sec"><div class="sec-label">External References</div><div class="ext-links">';
  if(p.wikipedia_url)h+='<a href="'+esc(p.wikipedia_url)+'" target="_blank" rel="noopener" class="ext-link"><svg class="ext-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 010 20"/></svg>Wikipedia &mdash; '+esc(p.full_name)+'</a>';
  if(p.youtube_url&&yid)h+='<a href="'+esc(p.youtube_url)+'" target="_blank" rel="noopener" class="ext-link"><svg class="ext-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="5 3 19 12 5 21 5 3"/></svg>YouTube &mdash; Animated Presentation</a>';
  return h+'</div></div>';
}

function wireCards(){
  document.querySelectorAll(".card").forEach(function(card){
    var id=card.dataset.id;
    card.querySelector(".card-cta").addEventListener("click",function(e){e.stopPropagation();openCard(id);});
    card.querySelector(".card-portrait").addEventListener("click",function(){if(!card.classList.contains("open"))openCard(id);});
    card.querySelector(".card-body").addEventListener("click",function(e){if(e.target.closest(".card-cta"))return;if(!card.classList.contains("open"))openCard(id);});
  });
  document.querySelectorAll(".close-btn").forEach(function(btn){
    btn.addEventListener("click",function(e){e.stopPropagation();closeCard(btn.dataset.cid);});
  });
  document.querySelectorAll(".bio-toggle").forEach(function(btn){
    btn.addEventListener("click",function(){
      var el=document.getElementById("bext-"+btn.dataset.bid);
      var o=el.classList.toggle("open");
      btn.textContent=o?"Read less \u2191":"Read more \u2193";
    });
  });
  document.querySelectorAll(".play-btn").forEach(function(btn){
    btn.addEventListener("click",function(){toggleAudio(btn.dataset.aid);});
  });
  document.querySelectorAll(".progress-wrap").forEach(function(wrap){
    wrap.addEventListener("click",function(e){
      var aid=wrap.dataset.pid,audio=document.getElementById(aid);
      if(!audio||!audio.duration)return;
      var r=wrap.getBoundingClientRect();
      audio.currentTime=Math.max(0,Math.min(1,(e.clientX-r.left)/r.width))*audio.duration;
      updateAudioUI(aid);
    });
  });
}

function openCard(id){
  if(expandedId&&expandedId!==id)closeCard(expandedId);
  expandedId=id;
  var card=document.querySelector('.card[data-id="'+id+'"]');
  if(!card)return;
  card.classList.add("open");
  setTimeout(function(){card.scrollIntoView({behavior:"smooth",block:"nearest"});},80);
}

function closeCard(id){
  var card=document.querySelector('.card[data-id="'+id+'"]');
  if(!card)return;
  card.classList.remove("open");
  card.querySelectorAll("audio").forEach(function(a){a.pause();a.currentTime=0;});
  card.querySelectorAll(".play-btn").forEach(function(b){
    b.innerHTML='<svg width="12" height="13" viewBox="0 0 12 13" fill="currentColor"><path d="M2 1.5l9 5-9 5v-10z"/></svg>';
  });
  if(expandedId===id)expandedId=null;
}

function toggleAudio(aid){
  var audio=document.getElementById(aid);
  var btn=document.querySelector('.play-btn[data-aid="'+aid+'"]');
  if(!audio||!btn)return;
  if(audio.paused){
    document.querySelectorAll("audio").forEach(function(a){
      if(a.id!==aid&&!a.paused){a.pause();
        var ob=document.querySelector('.play-btn[data-aid="'+a.id+'"]');
        if(ob)ob.innerHTML='<svg width="12" height="13" viewBox="0 0 12 13" fill="currentColor"><path d="M2 1.5l9 5-9 5v-10z"/></svg>';
      }
    });
    audio.play().catch(function(){});
    btn.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor"><rect x="1" y="1" width="4" height="10" rx="1"/><rect x="7" y="1" width="4" height="10" rx="1"/></svg>';
    audio.addEventListener("timeupdate",function(){updateAudioUI(aid);});
    audio.addEventListener("ended",function(){
      btn.innerHTML='<svg width="12" height="13" viewBox="0 0 12 13" fill="currentColor"><path d="M2 1.5l9 5-9 5v-10z"/></svg>';
    });
  }else{
    audio.pause();
    btn.innerHTML='<svg width="12" height="13" viewBox="0 0 12 13" fill="currentColor"><path d="M2 1.5l9 5-9 5v-10z"/></svg>';
  }
}

function updateAudioUI(aid){
  var audio=document.getElementById(aid);
  if(!audio||!audio.duration)return;
  var pct=(audio.currentTime/audio.duration)*100;
  var fill=document.getElementById("pf-"+aid);
  var dot=document.getElementById("pd-"+aid);
  var time=document.getElementById("pt-"+aid);
  if(fill)fill.style.width=pct+"%";
  if(dot)dot.style.left=pct+"%";
  if(time)time.textContent=fmt(audio.currentTime)+" / "+fmt(audio.duration);
}

function fmt(s){var m=Math.floor(s/60),sc=Math.floor(s%60);return m+":"+(sc<10?"0":"")+sc;}

function reveal(){
  var cards=document.querySelectorAll(".card:not(.show)");
  if("IntersectionObserver" in window){
    var obs=new IntersectionObserver(function(entries){
      entries.forEach(function(entry){
        if(entry.isIntersecting){
          var c=entry.target,idx=Array.from(c.parentElement.parentElement.children).indexOf(c.parentElement);
          setTimeout(function(){c.classList.add("show");},Math.min(idx*60,600));
          obs.unobserve(c);
        }
      });
    },{threshold:0.05,rootMargin:"0px 0px -20px 0px"});
    cards.forEach(function(c){obs.observe(c);});
  }else{cards.forEach(function(c){c.classList.add("show");});}
}

var _s=document.createElement('script');
_s.src='data2.js';
_s.onload=function(){init(window.PEOPLE_DATA);};
_s.onerror=function(){document.getElementById("grid").innerHTML='<p class="no-results">Error loading data.</p>';};
document.head.appendChild(_s);
</script>
</body>
</html>